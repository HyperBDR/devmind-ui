# E2E test runner: runs Playwright against devmind-ui service (same network).
FROM node:22-bookworm-slim

WORKDIR /app

COPY package*.json ./
RUN npm ci
COPY playwright.config.cjs ./
COPY e2e ./e2e/

RUN npx playwright install chromium --with-deps

ENV BASE_URL=http://devmind-ui:80
ENV CI=1

CMD ["npx", "playwright", "test", "--project=chromium"]
